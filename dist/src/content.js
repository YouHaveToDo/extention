function b(){return new Promise(t=>{chrome.runtime.sendMessage({action:"fetchOptions"},function(e){t(e.options)})})}function d(t){const e=document.querySelectorAll(".tableBox table tr");let r=null;return e.forEach(n=>{if(n.textContent.includes(t)){r=n.querySelector(".td-title label");return}}),r}function l(t,e,r){if(r){const n=new KeyboardEvent("keydown",{key:e,shiftKey:!1,bubbles:!0,cancelable:!0}),c=new KeyboardEvent("keypress",{key:e,shiftKey:!1,bubbles:!0,cancelable:!0}),o=new KeyboardEvent("keyup",{key:e,shiftKey:!1,bubbles:!0,cancelable:!0});t.dispatchEvent(n),t.dispatchEvent(c),t.value+=e,t.dispatchEvent(o)}else{const n=new KeyboardEvent("keydown",{key:e,code:`Digit${e}`,bubbles:!0,cancelable:!0}),c=new KeyboardEvent("keypress",{key:e,code:`Digit${e}`,bubbles:!0,cancelable:!0}),o=new KeyboardEvent("keyup",{key:e,code:`Digit${e}`,bubbles:!0,cancelable:!0});t.dispatchEvent(n),t.dispatchEvent(c),t.value+=e,t.dispatchEvent(o)}}async function f(){if(document.querySelector("#timeTable")){clearInterval(m);const e=await b(),r=d(e.time)??document.querySelector(".td-title label"),n=document.querySelector("label[for='userType-P']"),c=document.querySelector("#headcount"),o=document.querySelector("#user2"),u=document.querySelector("#user2_contact");if(!n||!c||!o||!u){console.error("can't find elements");return}r.click(),n.click(),c.focus();const i=e.count??"2";l(c,i,!1),o.focus();const a=e.name??"정종찬";for(let s of a)l(o,s,!0);u.focus();const y=e.phone??"01077300539";for(let s of y)l(u,s,!1);document.querySelector("#answer").focus(),document.addEventListener("keydown",function(s){s.key==="Enter"&&document.querySelector("#check").click(),s.key==="Shift"&&document.querySelector("#btnReservation").click()})}}const m=setInterval(f,100);
